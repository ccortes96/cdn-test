var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,s=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&i(e,a,t[a]);if(r)for(var a of r(t))o.call(t,a)&&i(e,a,t[a]);return e},l=(e,r)=>t(e,a(r));import{C as u,R as c,r as p,i as d,c as m,d as h,u as g,t as f,a as y,b,P as _,F as v,e as E,f as w}from"./vendor.c803325f.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const R={locale:"",application:{id:"",name:"",logo_url:"",metadata:{}},branding:{logo_url:"",colors:{primary:"",page_background:""}},tenant:{friendly_name:"",support_email:"",support_url:""},organization:{id:"",display_name:"",name:"",metadata:{},branding:{logo_url:"",colors:{primary:"",page_background:""}}},prompt:{name:"",screen:{name:"",texts:""}},user:{user_id:"",picture:"",email:"",email_verified:!0,app_metadata:{},user_metadata:{},family_name:"",given_name:"",name:"",nickname:"",username:""}},k=[{id:"merchant",domain:"portalid.h4b.dev",redirectUri:"https://portal.h4b.dev/authorize",scope:"openid profile email",audience:"https://portal.h4b.dev/",responseType:"code",responseMode:"query",databaseConnection:"Username-Password-Authentication"},{id:"hugo-fun-merchant",domain:"portalid.h4b.dev",redirectUri:"https://portal-fun.h4b.dev/authorize",scope:"openid profile email",audience:"https://hugo-fun-merchant",responseType:"code",responseMode:"query",databaseConnection:"Username-Password-Authentication"}],x=e=>{var t;return null==(t=document.getElementById(e))?void 0:t.value},S=e=>{const t=k.find((t=>t.id===e));return(null==t?void 0:t.databaseConnection)?t.databaseConnection:"Username-Password-Authentication"},P=e=>{const t="0123456789ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvwxyz+/";let a="";for(;e>0;){const r=new Uint8Array(16);window.crypto.getRandomValues(r).forEach((r=>{0!==e&&r<t.length&&(a+=t[r],e--)}))}return a},A=e=>e.toString(u.enc.Base64),C=e=>{const t=u.lib.WordArray.random(e),a=A(t);return A((r=a,u.SHA256(r)));var r},O=()=>({protocol:"oauth2",nonce:P(16),code_challenge:C(32),code_challenge_method:"S256",_intstate:"deprecated"}),j=c.createContext(R),L=({children:e})=>{const[t,a]=p.exports.useState(R),[r,n]=p.exports.useState(null),[o,i]=p.exports.useState({});p.exports.useEffect((()=>{a((e=>l(s({},e),{application:{name:x("auth0-app-name"),id:x("auth0-app-id"),logo_url:x("auth0-app-logo-url"),metadata:x("auth0-app-metadata")},branding:{logo_url:x("auth0-brand-logo-url"),colors:{primary:x("auth0-brand-colors-primary"),page_background:x("auth0-brand-colors-p-background")}},tenant:{friendly_name:x("auth0-tenat-name"),support_email:x("auth0-tenat-support-email"),support_url:x("auth0-tenat-support-url")},organization:{id:x("auth0-org-id"),display_name:x("auth0-org-display-name"),name:x("auth0-org-name"),metadata:x("auth0-org-metadata"),branding:{logo_url:x("auth0-org-brand-logo-url"),colors:{primary:x("auth0-org-brand-colors-primary"),page_background:x("auth0-org-brand-colors-p-background")}}},prompt:{name:x("auth0-prompt-name"),screen:{name:x("auth0-prompt-screen-name"),texts:x("auth0-prompt-screen-texts")}},user:{user_id:x("auth0-user-user-id"),picture:x("auth0-user-picture"),email:x("auth0-user-email"),email_verified:x("auth0-user-email-verified"),metadata:x("auth0-user-app-metadata"),user_metadata:x("auth0-user-user-metadata"),family_name:x("auth0-user-family-name"),given_name:x("auth0-user-given-name"),name:x("auth0-user-name"),nickname:x("auth0-user-nickname"),username:x("auth0-user-username")}})))}),[document.readyState]),p.exports.useEffect((()=>{var e;if(t.application.id){const a=((e,t)=>{const a=k.find((t=>t.id===e));return a?{domain:a.domain,clientID:t,redirectUri:a.redirectUri,scope:a.scope,audience:a.audience,responseType:a.responseType,responseMode:a.responseMode,overrides:{__tenant:"h4b-dev-merchant",__token_issuer:"https://portalid.h4b.dev/"}}:null})(t.application.name,t.application.id);console.log("app info",l(s(s({},a),O()),{state:new URLSearchParams(window.location.search).get("state")})),n(new d.WebAuth(l(s(s({},a),O()),{state:new URLSearchParams(window.location.search).get("state")})));const r=new URLSearchParams;r.append("state",null!=(e=new URLSearchParams(window.location.search).get("state"))?e:""),r.append("protocol","oauth2"),r.append("client",t.application.id),r.append("audience",a.audience),r.append("onRedirectCallback",'()=>Mu("/")'),r.append("scope",a.scope),r.append("response_type",a.responseType),r.append("response_mode",a.responseMode),window.history.pushState("","",r.toString())}}),[t.application.id]);return console.log("state",t),c.createElement(j.Provider,{value:{state:t,login:(e,a)=>{r.login({realm:S(t.application.name),username:e,password:a},((e,t)=>{e&&i(e),console.log("{err, authResult}",{err:e,authResult:t})}))},loginWithGoogle:()=>{r.authorize({connection:"google-oauth2"},((e,t)=>{e&&i(e),console.log("{err, authResult}",{err:e,authResult:t})}))},loginError:o}},e)};var T=m([["/",()=>({page:"home",title:"Inicio",menuActive:"home"})],["/logout",()=>({page:"logout",title:"Logout",menuActive:"",layout:"empty"})],["/authorize",()=>({page:"authorization",title:"authorization",menuActive:"",layout:"empty"})],["/configuration",()=>({page:"configuration",title:"Configuración"})],["/configuration/*",e=>({page:"configuration",title:"Configuración",props:{sectionId:e}})],["/configuration/*/*",(e,t)=>({page:"configuration",title:"Configuración",props:{sectionId:e,tabIndex:t}})],["/support",()=>({page:"support",title:"Soporte",menuActive:"support"})],["/terms-and-conditions",()=>({page:"terms"})]]);h.extend(g),h.extend(f),h.locale("es-us");const I=y([T,e=>{e.on("@init",(()=>({modal:{callbackData:{}}}))),e.on("modal/callback",(({modal:e},{callbackKey:t,callbackData:a})=>({modal:l(s({},e),{callbackData:l(s({},e.callbackData),{[t]:a})})})))},!1]),U=e=>I.dispatch(b,e);_.elementType.isRequired,_.object.isRequired,_.shape({picture:_.string,name:_.string}).isRequired,_.bool,_.bool;const q=({Component:e})=>c.createElement(p.exports.Suspense,{fallback:c.createElement(v,null)},e?c.createElement(e,null):null);q.propTypes={Component:_.elementType.isRequired},_.elementType.isRequired,_.string.isRequired,_.string.isRequired,_.object,_.elementType.isRequired;const D={},z=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`https://cdn.jsdelivr.net/gh/ccortes96/cdn-test@v0.0.5/${e}`)in D)return;D[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((e,t)=>{r.addEventListener("load",e),r.addEventListener("error",t)})):void 0}))).then((()=>e())):e()},M=new Map,N=e=>{if(M.has(e))return M.get(e);let t=null;switch(e){case"hugo-fun-merchant":t=p.exports.lazy((()=>z((()=>import("./index.5376d4ca.js")),["assets/index.5376d4ca.js","assets/vendor.c803325f.js","assets/vendor.7e30b6a2.css"])));break;case"merchant":t=p.exports.lazy((()=>z((()=>import("./index.49e78c97.js")),["assets/index.49e78c97.js","assets/index.d83f309d.css","assets/vendor.c803325f.js","assets/vendor.7e30b6a2.css"])));break;default:t=p.exports.lazy((()=>z((()=>import("./index.5e973fc6.js")),["assets/index.5e973fc6.js","assets/index.0f77893e.css","assets/vendor.c803325f.js","assets/vendor.7e30b6a2.css"])))}return M.set(e,t),t},B=()=>{var e;const[t,a]=p.exports.useState(!1),r=p.exports.useContext(j);if(p.exports.useEffect((()=>{window.unhandledrejection||(window.unhandledrejection=e=>{console.error(`UNHANDLED PROMISE REJECTION: ${JSON.stringify(e.reason)}`,e),a(!0)})}),[t]),t)return c.createElement(q,{Component:N("serverError")});const n=N(null==(e=r.state.application)?void 0:e.name);return c.createElement(q,{Component:n})},V=()=>c.createElement(c.Fragment,null,null,c.createElement(L,null,c.createElement(B,null)));E({environment:"production",dsn:{}.H4B_SENTRY_DSN});const H=document.getElementById("root");w.render(c.createElement(V,null),H);export{j as A,U as n};
