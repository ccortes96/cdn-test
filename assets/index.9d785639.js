var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,s=(e,t)=>{for(var n in t||(t={}))r.call(t,n)&&a(e,n,t[n]);if(o)for(var n of o(t))i.call(t,n)&&a(e,n,t[n]);return e},l=(e,o)=>t(e,n(o));import{R as c,r as u,i as d,c as p,d as m,u as h,t as g,a as f,b,P as y,F as _,e as v,f as E}from"./vendor.0046c8f2.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const w={icon:"",assetsUrl:"",auth0Domain:"",auth0Tenant:"",clientConfigurationBaseUrl:"",callbackOnLocationHash:!1,callbackURL:"",cdn:"",clientID:"",dict:{signin:{title:""}},extraParams:{protocol:"",audience:"",onRedirectCallback:"",scope:"",response_type:"",response_mode:"",nonce:"",code_challenge:"",code_challenge_method:"",auth0Client:"",_csrf:"",_intstate:"",state:""},internalOptions:{protocol:"",audience:"",onRedirectCallback:"",scope:"",response_type:"",response_mode:"",nonce:"",code_challenge:"",code_challenge_method:"",auth0Client:"",_csrf:"",_intstate:"",state:""},widgetUrl:"",isThirdPartyClient:!1,authorizationServer:{url:"",issuer:""},colors:{page_background:"",primary:""}},R=[{id:"merchant",domain:"portalid.h4b.dev",redirectUri:"https://portal.h4b.dev/authorize",scope:"openid profile email",audience:"https://portal.h4b.dev/",responseType:"code",responseMode:"query",databaseConnection:"Username-Password-Authentication"},{id:"hugo-fun-merchant",domain:"portalid.h4b.dev",redirectUri:"https://portal-fun.h4b.dev/authorize",scope:"openid profile email",audience:"https://hugo-fun-merchant",responseType:"code",responseMode:"query",databaseConnection:"Username-Password-Authentication"}],x=e=>{const t=R.find((t=>t.id===e));return(null==t?void 0:t.databaseConnection)?t.databaseConnection:"Username-Password-Authentication"},C=c.createContext(w),A=({children:e})=>{const[t,n]=u.exports.useState(w),[o,r]=u.exports.useState(null),[i,a]=u.exports.useState({});u.exports.useEffect((()=>{n((e=>{var t;return s(s({},e),null!=(t=window.auth0Application)?t:auth0Application)}))}),[document.readyState]),u.exports.useEffect((()=>{if(t.clientID){console.log("auth0Application",auth0Application),console.log("window.auth0Application",window.auth0Application);const e=((e,t)=>{const n=R.find((t=>t.id===e));return n?{domain:n.domain,clientID:t,redirectUri:n.redirectUri,scope:n.scope,audience:n.audience,responseType:n.responseType,responseMode:n.responseMode,overrides:{__tenant:"h4b-dev-merchant",__token_issuer:"https://portalid.h4b.dev/"}}:null})(t.dict.signin.title,t.clientID);r(new d.WebAuth(l(s({},e),{state:new URLSearchParams(window.location.search).get("state")})))}}),[t.clientID]);return console.log("state",t),c.createElement(C.Provider,{value:{state:t,login:(e,n)=>{o.login({realm:x(t.dict.signin.title),username:e,password:n},((e,t)=>{e&&a(e),console.log("{err, authResult}",{err:e,authResult:t})}))},loginWithGoogle:()=>{o.authorize({connection:"google-oauth2"},((e,t)=>{e&&a(e),console.log("{err, authResult}",{err:e,authResult:t})}))},loginError:i}},e)};var P=p([["/",()=>({page:"home",title:"Inicio",menuActive:"home"})],["/logout",()=>({page:"logout",title:"Logout",menuActive:"",layout:"empty"})],["/authorize",()=>({page:"authorization",title:"authorization",menuActive:"",layout:"empty"})],["/configuration",()=>({page:"configuration",title:"Configuración"})],["/configuration/*",e=>({page:"configuration",title:"Configuración",props:{sectionId:e}})],["/configuration/*/*",(e,t)=>({page:"configuration",title:"Configuración",props:{sectionId:e,tabIndex:t}})],["/support",()=>({page:"support",title:"Soporte",menuActive:"support"})],["/terms-and-conditions",()=>({page:"terms"})]]);m.extend(h),m.extend(g),m.locale("es-us");const k=f([P,e=>{e.on("@init",(()=>({modal:{callbackData:{}}}))),e.on("modal/callback",(({modal:e},{callbackKey:t,callbackData:n})=>({modal:l(s({},e),{callbackData:l(s({},e.callbackData),{[t]:n})})})))},!1]),O=e=>k.dispatch(b,e);y.elementType.isRequired,y.object.isRequired,y.shape({picture:y.string,name:y.string}).isRequired,y.bool,y.bool;const D=({Component:e})=>c.createElement(u.exports.Suspense,{fallback:c.createElement(_,null)},e?c.createElement(e,null):null);D.propTypes={Component:y.elementType.isRequired},y.elementType.isRequired,y.string.isRequired,y.string.isRequired,y.object,y.elementType.isRequired;const I={},S=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`https://cdn.jsdelivr.net/gh/ccortes96/cdn-test@v0.0.7/${e}`)in I)return;I[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((e,t)=>{o.addEventListener("load",e),o.addEventListener("error",t)})):void 0}))).then((()=>e())):e()},T=new Map,j=e=>{if(T.has(e))return T.get(e);let t=null;switch(e){case"hugo-fun-merchant":t=u.exports.lazy((()=>S((()=>import("./index.58e222f8.js")),["assets/index.58e222f8.js","assets/vendor.0046c8f2.js","assets/vendor.7e30b6a2.css"])));break;case"merchant":t=u.exports.lazy((()=>S((()=>import("./index.c766d1e4.js")),["assets/index.c766d1e4.js","assets/index.d83f309d.css","assets/vendor.0046c8f2.js","assets/vendor.7e30b6a2.css"])));break;default:t=u.exports.lazy((()=>S((()=>import("./index.63a2045b.js")),["assets/index.63a2045b.js","assets/index.0f77893e.css","assets/vendor.0046c8f2.js","assets/vendor.7e30b6a2.css"])))}return T.set(e,t),t},L=()=>{const[e,t]=u.exports.useState(!1),n=u.exports.useContext(C);if(u.exports.useEffect((()=>{window.unhandledrejection||(window.unhandledrejection=e=>{console.error(`UNHANDLED PROMISE REJECTION: ${JSON.stringify(e.reason)}`,e),t(!0)})}),[e]),e)return c.createElement(D,{Component:j("serverError")});const o=j(n.state.dict.signin.title);return c.createElement(D,{Component:o})},U=()=>c.createElement(c.Fragment,null,null,c.createElement(A,null,c.createElement(L,null)));v({environment:"production",dsn:{}.H4B_SENTRY_DSN});const q=document.getElementById("root");E.render(c.createElement(U,null),q);export{C as A,O as n};
